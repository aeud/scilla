{"name":"Scilla","tagline":"For recommendation","body":"# Guess what ...\r\n\r\n## Documentation\r\n\r\nPlease refer to http://docs.prediction.io/templates/ecommercerecommendation/quickstart/ for the engine configuration.\r\n\r\n## API integration\r\n\r\nThe easiest way to integrate Scilla from the main applications is to use the gem provided by PredictionIO. Here is there Github repo: https://github.com/PredictionIO/PredictionIO-Ruby-SDK\r\n\r\n```\r\ngem install predictionio\r\n```\r\n\r\nTo access the server, please register the allowed IPs, sending me an email to adrien.eudes@luxola.com.\r\n\r\nThe Scilla PredictionIO URL is the following: http://scilla.aprils.ml\r\n\r\nHere is a quick Ruby script:\r\n\r\n```\r\nrequire 'predictionio'\r\nrequire \"net/http\"\r\nrequire 'uri'\r\n\r\n# Connection to Scilla\r\nclient = PredictionIO::EngineClient.new('http://scilla.aprils.ml')\r\n# Ask for recommendation for user_id = 1 & account = 'default'\r\nresponse = client.send_query('user' => 'd1', 'num' => 4, 'account' => 'default')\r\n\r\n# Print\r\nputs response\r\n\r\n# {\"itemScores\"=>[{\"item\"=>\"d1115\", \"score\"=>1.061630775156563}, {\"item\"=>\"d1534\", \"score\"=>1.057689466303359}, {\"item\"=>\"d2609\", \"score\"=>1.054622587505051}, {\"item\"=>\"d769\", \"score\"=>1.0544517261607458}]}\r\n```\r\n\r\nThe 3 required parameters are `user`, which is (in lower case) the first letter of the account (`d` for `default`, `t` for `thailand` and `i` for `indonesia`), concatenated to the `user_id` from the linked database. `account` is an item of the list `'default', 'thailand', 'indonesia'` and `num` is the number of item you want the engine to answer.\r\n\r\nScilla will answer `num` products in the same format as the users you entered in input: one letter for the `account` and the `product_id` from the linked database.\r\n\r\nHave fun\r\n\r\n## Versions\r\n\r\n### v0.4.0\r\n\r\n- Change from ALSAlgorithm.scala to ECommAlgorithm.scala\r\n\r\n  * return popular bought items when no information is found for the user.\r\n  * add \"similarEvents\" parameter for configuration what user-to-item events are used for finding similar items\r\n  * re-structure the Algorithm code for easier customization and testing\r\n\r\n- add some unit tests for testing code that may be customized\r\n\r\n### v0.3.1\r\n\r\n- use INVALID_APP_NAME as default appName in engine.json\r\n\r\n### v0.3.0\r\n\r\n- update for PredictionIO 0.9.2, including:\r\n\r\n  - use new PEventStore and LEventStore API\r\n  - use appName in DataSource and Algorithm parameters\r\n\r\n\r\n### v0.2.0\r\n\r\n- update build.sbt and template.json for PredictionIO 0.9.2\r\n\r\n### v0.1.1\r\n\r\n- update for PredictionIO 0.9.0\r\n\r\n### v0.1.0\r\n\r\n- initial version\r\n\r\n\r\n## Development Notes\r\n\r\n### import sample data\r\n\r\n```\r\n$ python data/import_eventserver.py --access_key <your_access_key>\r\n```\r\n\r\n### query\r\n\r\nnormal:\r\n\r\n```\r\n$ curl -H \"Content-Type: application/json\" \\\r\n-d '{\r\n  \"user\" : \"u1\",\r\n  \"num\" : 10 }' \\\r\nhttp://localhost:8000/queries.json \\\r\n-w %{time_connect}:%{time_starttransfer}:%{time_total}\r\n```\r\n\r\n```\r\n$ curl -H \"Content-Type: application/json\" \\\r\n-d '{\r\n  \"user\" : \"u1\",\r\n  \"num\": 10,\r\n  \"categories\" : [\"c4\", \"c3\"]\r\n}' \\\r\nhttp://localhost:8000/queries.json \\\r\n-w %{time_connect}:%{time_starttransfer}:%{time_total}\r\n```\r\n\r\n```\r\ncurl -H \"Content-Type: application/json\" \\\r\n-d '{\r\n  \"user\" : \"u1\",\r\n  \"num\": 10,\r\n  \"whiteList\": [\"i21\", \"i26\", \"i40\"]\r\n}' \\\r\nhttp://localhost:8000/queries.json \\\r\n-w %{time_connect}:%{time_starttransfer}:%{time_total}\r\n```\r\n\r\n```\r\ncurl -H \"Content-Type: application/json\" \\\r\n-d '{\r\n  \"user\" : \"u1\",\r\n  \"num\": 10,\r\n  \"blackList\": [\"i21\", \"i26\", \"i40\"]\r\n}' \\\r\nhttp://localhost:8000/queries.json \\\r\n-w %{time_connect}:%{time_starttransfer}:%{time_total}\r\n```\r\n\r\nunknown user:\r\n\r\n```\r\ncurl -H \"Content-Type: application/json\" \\\r\n-d '{\r\n  \"user\" : \"unk1\",\r\n  \"num\": 10}' \\\r\nhttp://localhost:8000/queries.json \\\r\n-w %{time_connect}:%{time_starttransfer}:%{time_total}\r\n```\r\n\r\n### handle new user\r\n\r\nnew user:\r\n\r\n```\r\ncurl -H \"Content-Type: application/json\" \\\r\n-d '{\r\n  \"user\" : \"x1\",\r\n  \"num\": 10}' \\\r\nhttp://localhost:8000/queries.json \\\r\n-w %{time_connect}:%{time_starttransfer}:%{time_total}\r\n```\r\n\r\nimport some view events and try to get recommendation for x1 again.\r\n\r\n```\r\naccessKey=<YOUR_ACCESS_KEY>\r\n```\r\n\r\n```\r\ncurl -i -X POST http://localhost:7070/events.json?accessKey=$accessKey \\\r\n-H \"Content-Type: application/json\" \\\r\n-d '{\r\n  \"event\" : \"view\",\r\n  \"entityType\" : \"user\"\r\n  \"entityId\" : \"x1\",\r\n  \"targetEntityType\" : \"item\",\r\n  \"targetEntityId\" : \"i2\",\r\n  \"eventTime\" : \"2015-02-17T02:11:21.934Z\"\r\n}'\r\n\r\ncurl -i -X POST http://localhost:7070/events.json?accessKey=$accessKey \\\r\n-H \"Content-Type: application/json\" \\\r\n-d '{\r\n  \"event\" : \"view\",\r\n  \"entityType\" : \"user\"\r\n  \"entityId\" : \"x1\",\r\n  \"targetEntityType\" : \"item\",\r\n  \"targetEntityId\" : \"i3\",\r\n  \"eventTime\" : \"2015-02-17T02:12:21.934Z\"\r\n}'\r\n\r\n```\r\n\r\n## handle unavailable items\r\n\r\nSet the following items as unavailable (need to specify complete list each time when this list is changed):\r\n\r\n```\r\ncurl -i -X POST http://localhost:7070/events.json?accessKey=$accessKey \\\r\n-H \"Content-Type: application/json\" \\\r\n-d '{\r\n  \"event\" : \"$set\",\r\n  \"entityType\" : \"constraint\"\r\n  \"entityId\" : \"unavailableItems\",\r\n  \"properties\" : {\r\n    \"items\": [\"i43\", \"i20\", \"i37\", \"i3\", \"i4\", \"i5\"],\r\n  }\r\n  \"eventTime\" : \"2015-02-17T02:11:21.934Z\"\r\n}'\r\n```\r\n\r\nSet empty list when no more items unavailable:\r\n\r\n```\r\ncurl -i -X POST http://localhost:7070/events.json?accessKey=$accessKey \\\r\n-H \"Content-Type: application/json\" \\\r\n-d '{\r\n  \"event\" : \"$set\",\r\n  \"entityType\" : \"constraint\"\r\n  \"entityId\" : \"unavailableItems\",\r\n  \"properties\" : {\r\n    \"items\": [],\r\n  }\r\n  \"eventTime\" : \"2015-02-18T02:11:21.934Z\"\r\n}'\r\n```","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}